!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d=a("./components/Youtube"),e=a("./components/Photo"),f=a("./components/Profile"),g=a("./components/Menu"),h=a("./components/ReactMap"),i=a("./components/Carousel"),j=a("./components/Metronome");$("youtube").each(function(){var a=$(this).data("id");"undefined"!=typeof a&&React.render(React.createElement(d,{id:a}),this)}),$("google-photo").each(function(){var a=$(this).data("id");"undefined"!=typeof a&&React.render(React.createElement(e,{id:a}),this)}),$("carousel").each(function(){var a=$(this);React.render(React.createElement(i,{items:a.data("items")}),this)}),$("profile").each(function(){var a=$(this),b=a.data("name"),c=a.data("avatar"),d=a.data("description");React.render(React.createElement(f,{name:b,avatar:c,description:d}),this)}),$("react-menu").each(function(){var a=$(this);React.render(React.createElement(g,{current:a.data("current"),items:a.data("items")}),this)});var k=document.getElementById("mapContainer");k&&React.render(React.createElement(h,null),k);var l=document.getElementById("metronomeContainer");l&&React.render(React.createElement(j,null),l),$(".popup").popup({transition:"vertical flip"})},{"./components/Carousel":2,"./components/Menu":3,"./components/Metronome":5,"./components/Photo":6,"./components/Profile":7,"./components/ReactMap":8,"./components/Youtube":9}],2:[function(a,b,c){"use strict";var d=React.createClass({displayName:"Carousel",googlePhotoUrl:"https://lh3.googleusercontent.com/",componentDidMount:function(){$(this.refs.container.getDOMNode()).owlCarousel({loop:!0,items:1,margin:0,nav:!1,dots:!1,lazyLoad:!0,center:!0,autoHeight:!0})},renderItem:function(a){return"object"==typeof a?"":"string"==typeof a?React.createElement("img",{className:"owl-lazy ui image","data-src":this.googlePhotoUrl+a,alt:""}):""},render:function(){var a=[];return this.props.items.forEach(function(b){a.push(this.renderItem(b))}.bind(this)),React.createElement("div",{className:"ui blue piled segment",style:{"margin-bottom":"1em"}},React.createElement("div",{className:"owl-carousel",ref:"container"},a))}});b.exports=d},{}],3:[function(a,b,c){"use strict";var d=a("./MenuItem"),e=React.createClass({displayName:"Menu",render:function(){var a=[],b=this.props.current;return this.props.items.forEach(function(c){a.push(React.createElement(d,{title:c.title,url:c.url,current:b}))}),React.createElement("div",{className:"ui text menu"},a)}});b.exports=e},{"./MenuItem":4}],4:[function(a,b,c){"use strict";var d=React.createClass({displayName:"MenuItem",render:function(){var a;return a=this.props.current===this.props.url?React.createElement("span",{className:"header"},this.props.title):React.createElement("a",{className:"header",href:this.props.url},this.props.title),React.createElement("div",{className:"item"},a)}});b.exports=d},{}],5:[function(a,b,c){"use strict";var d=React.createClass({displayName:"Metronome",minTempo:30,maxTempo:200,minVolume:0,maxVolume:100,audioContext:null,timeWorker:null,lookAhead:25,current16thNote:0,scheduleAheadTime:.1,nextNoteTime:0,noteLength:.05,notesInQueue:[],quartersQuantity:null,sixteenthQuantity:null,nextNoteMultiplier:null,svg:null,svgWidth:null,svgHeight:50,svgPadding:4,pointer:null,rulerLineWidth:1,quarterSerifHeight:14,eightSerifHeight:7,spacing:null,rulerColor:"#979797",stressedNoteColor:"#DB2828",noteColor:"#2185D0",emptyNoteColor:"#EEE",unlocked:!1,decodedBeatSound:null,playButton:null,browserCompatible:!0,getInitialState:function(){return{tempo:101,noteResolution:"4",isPlaying:!1,signature:"4/4",accentFirstBeat:!1,volume:.5,useOscillator:!0}},init:function(){var a=window.AudioContext||window.webkitAudioContext||!1;return this.playButton=$(this.refs.playButton.getDOMNode()),this.playButton.focus(),this.initSvg(),a?(this.audioContext=new a,this.loadBeatData().then(function(a){this.decodedBeatSound=a}.bind(this),function(a){console.log("Cannot load beat sound.",a)}),this.timerWorker=new Worker("assets/metronome/metronomeworker.js"),this.timerWorker.onmessage=function(a){"tick"==a.data&&this.scheduler()}.bind(this),void this.timerWorker.postMessage({interval:this.lookAhead})):void alert("Sorry, but the Web Audio API is not supported by your browser. Please, consider upgrading to the latest version or downloading Google Chrome or Mozilla Firefox")},initSvg:function(){var a=this.refs.svg.getDOMNode(),b=$(this.refs.card.getDOMNode()).width();$(a).width(b).height(50),$(this.refs.card.getDOMNode()).width(),this.svg=Snap(a),this.svgWidth=this.svg.node.width.baseVal.value-2*this.svgPadding,this.drawRuler(),this.drawPointer()},drawRuler:function(){var a=this.svg.select("#ruler");a&&a.remove(),this.initParams(),this.spacing=(this.svgWidth-this.sixteenthQuantity*this.rulerLineWidth)/this.sixteenthQuantity,a=this.svg.group(this.svg.line(this.svgPadding/2,this.svgHeight,this.svgWidth+this.svgPadding,this.svgHeight));for(var b=0;b<=this.sixteenthQuantity;b++){var c=this.spacing*b+b*this.rulerLineWidth+this.svgPadding,d=b%this.quartersQuantity===0?this.quarterSerifHeight:this.eightSerifHeight;a.add(this.svg.line(c,this.svgHeight,c,this.svgHeight-d))}a.attr({stroke:this.rulerColor,strokeWidth:this.rulerLineWidth,id:"ruler"})},drawPointer:function(){this.pointer=this.svg.polygon([this.svgPadding,this.svgHeight-this.quarterSerifHeight,this.svgPadding+3,this.svgHeight-38,this.svgPadding-3,this.svgHeight-38,this.svgPadding,this.svgHeight-this.quarterSerifHeight]).attr({fill:"#FFF"})},movePointer:function(){var a,b=1/this.state.tempo*1500,c=this.spacing*this.current16thNote+this.current16thNote;a=this.state.accentFirstBeat&&0===this.current16thNote?this.stressedNoteColor:this.current16thNote%this.quartersQuantity===0?this.noteColor:this.emptyNoteColor,this.pointer.animate({transform:"t"+c+",0",fill:a},b)},initParams:function(){"4/4"===this.state.signature&&(this.sixteenthQuantity="12"===this.state.noteResolution?12:16),"3/4"===this.state.signature&&(this.sixteenthQuantity="12"===this.state.noteResolution?9:12),this.quartersQuantity="12"===this.state.noteResolution?3:4,this.nextNoteMultiplier="12"===this.state.noteResolution?.33:.25},loadBeatData:function(){return new Promise(function(a,b){var c=new XMLHttpRequest;c.open("get","assets/metronome/beat.mp3",!0),c.responseType="arraybuffer",c.onload=function(){var d=c.response;this.audioContext.decodeAudioData(d,function(b){a(b)},function(a){console.log("Error with decoding audio data. "+a.err),b(a.err)})}.bind(this),c.send()}.bind(this))},play:function(){this.unlock(),this.setState({isPlaying:!this.state.isPlaying},function(){this.state.isPlaying?(this.initParams(),this.current16thNote=-1,this.nextNoteTime=this.audioContext.currentTime,this.timerWorker.postMessage("start")):this.timerWorker.postMessage("stop")}),this.playButton.focus()},startOver:function(){this.state.isPlaying&&(this.timerWorker.postMessage("stop"),this.initParams(),this.current16thNote=-1,this.nextNoteTime=this.audioContext.currentTime,this.timerWorker.postMessage("start")),this.playButton.focus()},scheduler:function(){for(;this.nextNoteTime<this.audioContext.currentTime+this.scheduleAheadTime;)this.scheduleNote(this.current16thNote,this.nextNoteTime),this.nextNote()},nextNote:function(){var a=60/this.state.tempo;this.nextNoteTime+=a*this.nextNoteMultiplier,this.current16thNote++,this.current16thNote==this.sixteenthQuantity&&(this.current16thNote=0)},scheduleNote:function(a,b){var c;this.notesInQueue.push({note:a,time:b}),this.movePointer(),this.noteShouldBePlayed(a)&&(c=this.getAudioSource(a),c.start(b),c.stop(b+this.noteLength))},getAudioSource:function(a){var b,c=this.audioContext.createGain();return this.state.useOscillator?(b=this.audioContext.createOscillator(),0===a?b.frequency.value=this.state.accentFirstBeat?880:440:a%this.quartersQuantity===0?b.frequency.value=440:b.frequency.value=220):(b=this.audioContext.createBufferSource(),b.buffer=this.decodedBeatSound),b.connect(c),c.connect(this.audioContext.destination),c.gain.value=this.state.volume,b},unlock:function(){if(this.iOS()&&!this.unlocked){var a=this.audioContext.createBufferSource();a.buffer=this.audioContext.createBuffer(1,1,22050),a.connect(this.audioContext.destination),a.noteOn(0),setTimeout(function(){(a.playbackState===a.PLAYING_STATE||a.playbackState===a.FINISHED_STATE)&&(this.unlocked=!0)},0)}},iOS:function(){for(var a=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];a.length;)if(navigator.platform===a.pop())return!0;return!1},detectIE:function(){var a,b,c=window.navigator.userAgent,d=c.indexOf("MSIE ");if(d>0)return parseInt(c.substring(d+5,c.indexOf(".",d)),10);if(a=c.indexOf("Trident/"),a>0){var e=c.indexOf("rv:");return parseInt(c.substring(e+3,c.indexOf(".",e)),10)}return b=c.indexOf("Edge/"),b>0?parseInt(c.substring(b+5,c.indexOf(".",b)),10):!1},noteShouldBePlayed:function(a){return"4"===this.state.noteResolution&&a%4?!1:"12"===this.state.noteResolution&&[1,4,7,10].indexOf(a)>-1?!1:"8"===this.state.noteResolution&&a%2?!1:!0},changeTempo:function(a){this.setState({tempo:a.target.value},this.startOver)},changeResolution:function(a){this.setState({noteResolution:a},function(){this.drawRuler(),this.startOver()})},changeSignature:function(a){this.setState({signature:a},function(){this.drawRuler(),this.startOver()})},changeVolume:function(a){this.setState({volume:a.target.value/100})},toggleAccentFirstBeat:function(){this.setState({accentFirstBeat:!this.state.accentFirstBeat},this.startOver)},toggleUseOscillator:function(){this.setState({useOscillator:!this.state.useOscillator},this.startOver)},popups:function(){$(".blue.question.icon").popup({transition:"vertical flip",inline:!0,hoverable:!0,delay:{show:300,hide:800}})},componentDidMount:function(){var a=this;return this.detectIE()?void this.popups():(this.init(),$(".ui.resolution.radio.checkbox").checkbox({onChange:function(){a.changeResolution(this.value)}}),void $(".ui.signature.radio.checkbox").checkbox({onChange:function(){a.changeSignature(this.value)}}))},componentDidUpdate:function(){},render:function(){var a,b=this.state.isPlaying?"stop":"play",c=this.state.isPlaying?"red stop icon":"white play icon",d=parseInt(100*this.state.volume);return(a=this.detectIE())?React.createElement("div",{className:"ui negative message"},React.createElement("div",{className:"header"},"Sorry internet explorer is not supported."),"Please install another browser (chrome, firefox, safari, opera etc).",React.createElement("i",{ref:"notSupported",className:"blue question icon"}),React.createElement("div",{className:"ui popup"},"Unfortunately Internet explorer ",a," ",React.createElement("a",{href:"https://developer.mozilla.org/en-US/docs/Web/API/AudioContext/currentTime",target:"_blank"},"does not support")," currentTime property of audio context, and it is required to calculate actual time properly, without delays.")):React.createElement("div",{className:"metronome"},React.createElement("div",{className:"ui centered card"},React.createElement("div",{className:"content",ref:"card"},React.createElement("a",{href:"https://github.com/alagodich/alagodich.github.io/blob/master/app/components/Metronome.js",target:"_blank",className:"ui right corner blue label"},React.createElement("i",{ref:"notSupported",className:"white github icon",style:{"text-decoration":"none",cursor:"pointer"}})),React.createElement("svg",{ref:"svg"})),React.createElement("div",{className:"extra content ui form"},React.createElement("div",{id:"controls"},React.createElement("div",{id:"tempo"},"Tempo: ",React.createElement("span",null,this.state.tempo),React.createElement("br",null),React.createElement("input",{id:"tempo",type:"range",min:this.minTempo,max:this.maxTempo,value:this.state.tempo,onChange:this.changeTempo,className:"metronome__slider"})),React.createElement("div",{id:"volume"},"Volume: ",React.createElement("span",null,d,"%"),React.createElement("br",null),React.createElement("input",{id:"volume",type:"range",min:this.minVolume,max:this.maxVolume,value:d,onChange:this.changeVolume,className:"metronome__slider"})),React.createElement("div",{style:{display:this.iOS()?"none":"block"}},React.createElement("div",{className:"ui divider"}),React.createElement("div",{className:"ui oscillator toggle checked checkbox"},React.createElement("input",{type:"checkbox",tabindex:"0","class":"hidden",name:"oscillator",checked:this.state.useOscillator,onChange:this.toggleUseOscillator}),React.createElement("label",null,"Digital sound"))),React.createElement("div",{className:"ui divider"}),React.createElement("div",{className:"inline fields"},React.createElement("div",{className:"field"},React.createElement("div",{className:"ui resolution radio checkbox"},React.createElement("input",{type:"radio",name:"resolution",value:"4",tabindex:"0",className:"hidden",checked:"4"===this.state.noteResolution}),React.createElement("label",null,"Quarter"))),React.createElement("div",{className:"field"},React.createElement("div",{className:"ui resolution radio checkbox"},React.createElement("input",{type:"radio",name:"resolution",value:"8",tabindex:"0",className:"hidden",checked:"8"===this.state.noteResolution}),React.createElement("label",null,"8th"))),React.createElement("div",{className:"field"},React.createElement("div",{className:"ui resolution radio checkbox"},React.createElement("input",{type:"radio",name:"resolution",value:"12",tabindex:"0",className:"hidden",checked:"12"===this.state.noteResolution}),React.createElement("label",null,"Shuffle")))),React.createElement("div",{className:"ui divider"}),React.createElement("div",{className:"inline fields"},React.createElement("div",{className:"field"},React.createElement("div",{className:"ui signature radio checkbox"},React.createElement("input",{type:"radio",name:"signature",value:"4/4",tabindex:"0",className:"hidden",checked:"4/4"===this.state.signature}),React.createElement("label",null,"4/4"))),React.createElement("div",{className:"field"},React.createElement("div",{className:"ui signature radio checkbox"},React.createElement("input",{type:"radio",name:"signature",value:"3/4",tabindex:"0",className:"hidden",checked:"3/4"===this.state.signature}),React.createElement("label",null,"3/4")))),React.createElement("div",{style:{display:this.state.useOscillator?"block":"none"}},React.createElement("div",{className:"ui divider"}),React.createElement("div",{className:"ui accent toggle checked checkbox"},React.createElement("input",{type:"checkbox",tabindex:"0","class":"hidden",name:"accent",checked:this.state.accentFirstBeat,onChange:this.toggleAccentFirstBeat}),React.createElement("label",null,"Accent the first beat"))))),React.createElement("button",{className:"ui bottom primary attached button",onClick:this.play,ref:"playButton"},React.createElement("i",{className:c}),b)))}});b.exports=d},{}],6:[function(a,b,c){"use strict";var d=React.createClass({displayName:"Photo",googlePhotoUrl:"https://lh3.googleusercontent.com/",render:function(){var a=this.googlePhotoUrl+this.props.id;return React.createElement("img",{className:"ui image",src:a,style:{"max-height":1e3,"margin-bottom":"1em"}})}});b.exports=d},{}],7:[function(a,b,c){"use strict";var d=React.createClass({displayName:"Profile",render:function(){var a=[],b=[];return this.props.description.forEach(function(b){var c,d=b.icon+" icon";c="undefined"!=typeof b.content.href?React.createElement("a",{href:b.content.href,target:"_blank"},b.content.text):b.content,a.push(React.createElement("div",{className:"item"},React.createElement("i",{className:d}),React.createElement("div",{className:"content"},c)))}),this.props.avatar.forEach(function(a){var c=b.length>0?"hidden content":"visible content";b.push(React.createElement("img",{src:a,className:c}))}),React.createElement("div",null,React.createElement("div",{className:"ui card"},React.createElement("div",{className:"ui slide masked reveal image"},b),React.createElement("div",{className:"content"},React.createElement("div",{className:"header"},this.props.name),React.createElement("div",{className:"description"},React.createElement("div",{className:"ui list"},a)))))}});b.exports=d},{}],8:[function(a,b,c){"use strict";var d=React.createClass({displayName:"ReactMap",getContainer:function(){return this.refs.mapContainer.getDOMNode()},getDefaultSettings:function(){return{chart:{borderWidth:1,events:{drillup:function(){this.setTitle(null,{text:""})}}},title:{text:"Страны, которые я посетил."},legend:{enabled:!1},mapNavigation:{enabled:!0,buttonOptions:{verticalAlign:"bottom"}},credits:{enabled:!1}}},renderMap:function(a){var b=Highcharts.maps["custom/world"],c=this.getDefaultSettings(),d=this.getContainer(),e=[];a.forEach(function(a){e[a.code]=a.cities}),c.series=[{name:"Countries",mapData:b,color:["#E0E0E0"],enableMouseTracking:!1},{type:"mapbubble",mapData:b,name:"Страны",joinBy:["iso-a2","code"],data:a,minSize:20,maxSize:"12%",tooltip:{pointFormat:"{point.country}"}}],c.drilldown={activeDataLabelStyle:{color:"#FFFFFF",textDecoration:"none",textShadow:"0 0 3px #000000"},drillUpButton:{relativeTo:"spacingBox",position:{x:0,y:60}}},c.chart.events.drilldown=function(a){if(!a.seriesOptions){var b=this,c=a.point.drilldown,d=a.point.country,f="countries/"+c+"/"+c+"-all",g=setTimeout(function(){Highcharts.maps[f]||(b.showLoading('<i class="icon-frown"></i> Failed loading '+a.point.name),g=setTimeout(function(){b.hideLoading()},1e3))},3e3),h=Highcharts.geojson(Highcharts.maps[f]);clearTimeout(g),b.addSeriesAsDrilldown(a.point,{name:a.point.name,mapData:h,data:e[a.point.code],joinBy:"hasc",tooltip:{pointFormat:"{point.city}"}})}this.setTitle(null,{text:d})},$(d).highcharts("Map",c)},componentDidMount:function(){var a=this.renderMap;$.getJSON("assets/places.json",function(b){a(b)})},render:function(){return React.createElement("div",{ref:"mapContainer",className:"map"})}});b.exports=d},{}],9:[function(a,b,c){"use strict";var d=React.createClass({displayName:"Youtube",componentDidMount:function(){$(this.refs.youtubeContainer.getDOMNode()).embed({id:this.props.id,source:"youtube",placeholder:"",autoplay:!1})},render:function(){return React.createElement("div",{ref:"youtubeContainer",className:"ui embed",style:{"margin-bottom":"1em"}})}});b.exports=d},{}]},{},[1]);